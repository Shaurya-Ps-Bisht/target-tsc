{
  "testMetadata": {
    "testName": "CoreSvc Accounting DebitClearing_CreditBeneficiary Test",
    "testDescription": "End-to-end test for DebitClearing_CreditBeneficiary action in CoreSvc Accounting"
  },
  "messaging": {
    "inputQueue": {
      "destination": "P/A/CoreSvc/AU/PMT/Orchestrator/1/PE/N/ACCOUNTING/CoreSvc/FAST/INWARD/NORM",
      "isCompressed": false
    },
    "reply": {
      "destination": "P/A/CoreSvc/AU/PMT/ACCOUNTING/1/PE/N/ACCOUNTING-GL/CoreSvc/FAST/INWARD/NORM",
      "destinationType": "topic",
      "isCompressed": false,
      "responseTemplatePath": "test-data_4.json",
      "correlationIdDisabled": true
    },
    "protocol": "Solace"
  },
  "testTemplateData": {
    "templatePath": "template_4.json",
    "templateParameters": {
      "static": {
        "actionCode": "DebitClearing_CreditBeneficiary",
        "fromBic": "DEBTORBANKAUXX",
        "toBic": "CREDITRBANKAUXX",
        "fromCountry": "AU",
        "toCountry": "AU",
        "fromBranch": "DEBIT_BRANCH_CODE",
        "toBranch": "CREDIT_BRANCH_CODE",
        "currency": "AUD",
        "amount": "150.75",
        "beneficiaryCountry": "AU",
        "beneficiaryName": "Creditor Name",
        "beneficiaryAccountId": "CREDIT_ACCT_ID_456",
        "debitCountry": "AU",
        "debitAccountId": "DEBIT_ACCT_ID_123",
        "debitAcctSys": "LegacyGL",
        "debitAcctUse": "Suspense",
        "clearingPref": "FAST",
        "clearSubPref": "ICS1",
        "chargeBearer": "SLEV",
        "msgType": "CoreSvc.clear.01-x2p1.04",
        "scheme": "pacs.002.001.06",
        "clrngSys": "CoreSvc-AU"
      }
    }
  },
  "databaseVerification": [
    {
      "query": "SELECT * FROM PAYMENT_ACCOUNTING_LOG WHERE PU_ID = '${puId}' AND TX_ID = '${txId}'",
      "verification": [
        {
          "field": "PU_ID",
          "type": "equals",
          "value": "${puId}"
        },
        {
          "field": "TX_ID",
          "type": "equals",
          "value": "${txId}"
        },
        {
          "field": "DEBIT_ACCOUNT_ID",
          "type": "equals",
          "value": "DEBIT_ACCT_ID_123"
        },
        {
          "field": "DEBIT_AMOUNT",
          "type": "equals",
          "value": "${amount}"
        },
        {
          "field": "DEBIT_CURRENCY",
          "type": "equals",
          "value": "${currency}"
        },
        {
          "field": "CREDIT_ACCOUNT_ID",
          "type": "equals",
          "value": "INTERNAL_CREDIT_ACCT_789"
        },
        {
          "field": "CREDIT_AMOUNT",
          "type": "equals",
          "value": "${amount}"
        },
        {
          "field": "CREDIT_CURRENCY",
          "type": "equals",
          "value": "${currency}"
        }
      ]
    }
  ],
  "mongoVerification": [
    {
      "collection": "accountingAuditlog",
      "filter": {
        "puId": "${puId}"
      },
      "verification": [
        {
          "field": "reqId",
          "type": "equals",
          "value": "${txId}"
        },
        {
          "field": "source",
          "type": "equals",
          "value": "InboundAccountingService"
        },
        {
          "field": "eventcode",
          "type": "equals",
          "value": "EVT.CoreSvc.Status.Accounting.102"
        }
      ],
      "expectedCount": {
        "type": "equals",
        "value": 1
      }
    }
  ]
}